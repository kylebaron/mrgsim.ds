[{"path":"https://kylebaron.github.io/mrgsim.ds/articles/mrgsim.ds.html","id":"load-the-model","dir":"Articles","previous_headings":"","what":"Load the model","title":"Get Started","text":"Load model using mread_ds() friends. model almost identical model loaded mread(); just extra information included make sure works well mrgsim.ds approach.","code":"mod <- mread_ds(\"popex-2.mod\", outvars = \"IPRED, DV, ECL\")"},{"path":"https://kylebaron.github.io/mrgsim.ds/articles/mrgsim.ds.html","id":"simulate","dir":"Articles","previous_headings":"","what":"Simulate","title":"Get Started","text":"simulate, call mrgsim_ds() output handles similar regular mrgsim() output","code":"data <- evd_expand(amt = c(100, 300, 700), ii = 24, addl = 4, ID = 1:10)  set.seed(98) out <- mrgsim_ds(mod, data = data) out ## Model: popex-2_mod ## Dim  : 14,460 x 5 ## Files: 1 [295 Kb] ## Owner: yes ##     ID TIME        ECL     IPRED        DV ## 1:   1  0.0 -0.1397334 0.0000000 0.0000000 ## 2:   1  0.0 -0.1397334 0.0000000 0.0000000 ## 3:   1  0.5 -0.1397334 0.7493918 0.7493918 ## 4:   1  1.0 -0.1397334 1.2650920 1.2650920 ## 5:   1  1.5 -0.1397334 1.6175329 1.6175329 ## 6:   1  2.0 -0.1397334 1.8559447 1.8559447 ## 7:   1  2.5 -0.1397334 2.0147377 2.0147377 ## 8:   1  3.0 -0.1397334 2.1179631 2.1179631 head(out) ## # A tibble: 6 × 5 ##      ID  TIME    ECL IPRED    DV ##   <dbl> <dbl>  <dbl> <dbl> <dbl> ## 1     1   0   -0.140 0     0     ## 2     1   0   -0.140 0     0     ## 3     1   0.5 -0.140 0.749 0.749 ## 4     1   1   -0.140 1.27  1.27  ## 5     1   1.5 -0.140 1.62  1.62  ## 6     1   2   -0.140 1.86  1.86 dim(out) ## [1] 14460     5 plot(out, nid = 10)"},{"path":"https://kylebaron.github.io/mrgsim.ds/articles/mrgsim.ds.html","id":"simulation-files","dir":"Articles","previous_headings":"","what":"Simulation files","title":"Get Started","text":"Simulation files always initially stored tempdir() save outputs persistent location, use write_ds(). re-writes data single parquet file. can take time large outputs across multiple files. alternative rename move.","code":"out1 <- mrgsim_ds(mod, data) out2 <- mrgsim_ds(mod, data, id = \"regimens\") out3 <- mrgsim_ds(mod, data = filter(data, AMT==300))  list_temp() ## 4 files [984.8 Kb] ## - mrgsims-ds-1c7121f867da.parquet ## - mrgsims-ds-1c71632e76cc.parquet ## - mrgsims-ds-1c7175232ea6.parquet ## - mrgsims-ds-regimens.parquet write_ds(out, sink = file.path(save_dir, \"regimen1\")) rename_ds(out, \"regimen-1\") move_ds(out, save_dir)"},{"path":"https://kylebaron.github.io/mrgsim.ds/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Kyle T Baron. Author, maintainer, copyright holder.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Baron K (2026). mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs 'mrgsolve'. R package version 0.0.1.9000, https://github.com/kylebaron/mrgsim.ds.","code":"@Manual{,   title = {mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve'},   author = {Kyle T Baron},   year = {2026},   note = {R package version 0.0.1.9000},   url = {https://github.com/kylebaron/mrgsim.ds}, }"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"mrgsimds","dir":"","previous_headings":"","what":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"mrgsim.ds provides Apache Arrow-backed simulation output object mrgsolve, greatly reducing memory footprint large simulations providing high-performance pipeline summarizing huge simulation outputs. arrow-based simulation output objects R claim ownership files disk. files automatically removed owning object goes scope becomes subject R garbage collector. “anonymous”, parquet-formatted files hold data tempdir() working R, functions provided move data permanent locations later use.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"can install development version mrgsim.ds r-universe :","code":"# Install 'mrgsim.ds' in R: install.packages('mrgsim.ds', repos = c('https://kylebaron.r-universe.dev', 'https://cloud.r-project.org'))"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"illustrate mrgsim.ds simulation. mrgsim.ds provides new mrgsim() variant - mrgsim_ds(). name implies tapping Apache Arrow Dataset functionality. simulation carries 1,446,000 rows.","code":"library(mrgsim.ds) library(dplyr)  mod <- modlib_ds(\"popex\", end = 240, outvars = \"IPRED,CL\")  data <- expand.ev(amt = 100, ii = 24, total = 6, ID = 1:3000) out <- mrgsim_ds(mod, data)  out . Model: popex . Dim  : 1.4M x 4 . Files: 1 [11.9 Mb] . Owner: yes .     ID time        CL    IPRED . 1:   1  0.0 0.6601045 0.000000 . 2:   1  0.0 0.6601045 0.000000 . 3:   1  0.5 0.6601045 1.756330 . 4:   1  1.0 0.6601045 2.947337 . 5:   1  1.5 0.6601045 3.744798 . 6:   1  2.0 0.6601045 4.268478 . 7:   1  2.5 0.6601045 4.601877 . 8:   1  3.0 0.6601045 4.803204"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"very-lightweight-simulation-output-object","dir":"","previous_headings":"","what":"Very lightweight simulation output object","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"output object doesn’t actually carry 1.4M rows simulated data. Rather stores pointer data parquet files disk. means almost nothing inside object simulation regular mrgsim()? mrgsim.ds object light weight despite tracking data.","code":"basename(out$files) . [1] \"mrgsims-ds-6ece3b5bb339.parquet\" lobstr:::obj_size(out) . 292.51 kB  dim(out) . [1] 1446000       4 x <- mrgsim(mod, data)  lobstr::obj_size(x) . 46.30 MB  dim(x) . [1] 1446000       4"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"handles-like-regular-mrgsim-output","dir":"","previous_headings":"","what":"Handles like regular mrgsim output","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":", can lot typical things mrgsim() output object.  includes coercing different types objects. can get usual R data frames stay arrow ecosystem try hand duckdb","code":"plot(out, nid = 12) head(out) . # A tibble: 6 × 4 .      ID  time    CL IPRED .   <dbl> <dbl> <dbl> <dbl> . 1     1   0   0.660  0    . 2     1   0   0.660  0    . 3     1   0.5 0.660  1.76 . 4     1   1   0.660  2.95 . 5     1   1.5 0.660  3.74 . 6     1   2   0.660  4.27  tail(out) . # A tibble: 6 × 4 .      ID  time    CL IPRED .   <dbl> <dbl> <dbl> <dbl> . 1  3000  238. 0.779 0.119 . 2  3000  238  0.779 0.117 . 3  3000  238. 0.779 0.115 . 4  3000  239  0.779 0.113 . 5  3000  240. 0.779 0.111 . 6  3000  240  0.779 0.109  dim(out) . [1] 1446000       4 as_tibble(out) . # A tibble: 1,446,000 × 4 .       ID  time    CL IPRED .    <dbl> <dbl> <dbl> <dbl> .  1     1   0   0.660  0    .  2     1   0   0.660  0    .  3     1   0.5 0.660  1.76 .  4     1   1   0.660  2.95 .  5     1   1.5 0.660  3.74 .  6     1   2   0.660  4.27 .  7     1   2.5 0.660  4.60 .  8     1   3   0.660  4.80 .  9     1   3.5 0.660  4.91 . 10     1   4   0.660  4.96 . # ℹ 1,445,990 more rows as_arrow_ds(out) . FileSystemDataset with 1 Parquet file . 4 columns . ID: double . time: double . CL: double . IPRED: double .  . See $metadata for additional Schema metadata as_duckdb_ds(out) . # Source:   table<arrow_001> [?? x 4] . # Database: DuckDB 1.4.3 [kyleb@Darwin 24.6.0:R 4.5.2/:memory:] .       ID  time    CL IPRED .    <dbl> <dbl> <dbl> <dbl> .  1     1   0   0.660  0    .  2     1   0   0.660  0    .  3     1   0.5 0.660  1.76 .  4     1   1   0.660  2.95 .  5     1   1.5 0.660  3.74 .  6     1   2   0.660  4.27 .  7     1   2.5 0.660  4.60 .  8     1   3   0.660  4.80 .  9     1   3.5 0.660  4.91 . 10     1   4   0.660  4.96 . # ℹ more rows"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"tidyverse-friendly","dir":"","previous_headings":"","what":"Tidyverse-friendly","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"’ve integrated dplyr ecosystem well, allowing filter(), group_by(), mutate(), select(), summarise(), rename(), arrange() way directly pipeline summarize simulations using power Apache Arrow.","code":"dd <-    out %>%    group_by(time) %>%    summarise(Mean = mean(IPRED, na.rm = TRUE), n = n()) %>%    arrange(time)  dd . FileSystemDataset (query) . time: double . Mean: double . n: int64 .  . * Sorted by time [asc] . See $.data for the source Arrow object collect(dd) . # A tibble: 481 × 3 .     time  Mean     n .    <dbl> <dbl> <int> .  1   0    0     6000 .  2   0.5  1.13  3000 .  3   1    1.83  3000 .  4   1.5  2.29  3000 .  5   2    2.60  3000 .  6   2.5  2.81  3000 .  7   3    2.96  3000 .  8   3.5  3.05  3000 .  9   4    3.10  3000 . 10   4.5  3.13  3000 . # ℹ 471 more rows"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"good-for-large-simulations","dir":"","previous_headings":"","what":"Good for large simulations","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"workflow particularly useful running replicate simulations parallel, large outputs Now 10x number rows (14.5M), little change object size.","code":"library(future.apply, quietly = TRUE)  plan(multisession, workers = 5L)  out2 <- future_lapply(1:10, \\(x) { mrgsim_ds(mod, data) }, future.seed = TRUE)  out2 <- reduce_ds(out2) out2 . Model: popex . Dim  : 14.5M x 4 . Files: 10 [119.2 Mb] . Owner: yes .     ID time        CL     IPRED . 1:   1  0.0 0.7453202 0.0000000 . 2:   1  0.0 0.7453202 0.0000000 . 3:   1  0.5 0.7453202 0.2004743 . 4:   1  1.0 0.7453202 0.3821993 . 5:   1  1.5 0.7453202 0.5467789 . 6:   1  2.0 0.7453202 0.6956808 . 7:   1  2.5 0.7453202 0.8302481 . 8:   1  3.0 0.7453202 0.9517104 lobstr::obj_size(out2) . 295.56 kB"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"files-on-disk-are-automagically-managed","dir":"","previous_headings":"","what":"Files on disk are automagically managed","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"arrow files stored tempdir() parquet format directory eventually removed R session ends. Tools provided manage space. also put finalizer object , goes scope, files automatically cleaned . First, run bunch simulations. 12 files holding simulation outputs. Now, remove one objects containing 10 files. soon garbage collector called, leftover files cleaned .","code":"list_temp() . 11 files [131.1 Mb] . - mrgsims-ds-6ece3b5bb339.parquet . - mrgsims-ds-6f0c360fd6d3.parquet .    ... . - mrgsims-ds-6f10225ef974.parquet . - mrgsims-ds-6f1094b404d.parquet retain_temp(out2) . Discarding 1 files.  list_temp() . 10 files [119.2 Mb] . - mrgsims-ds-6f0c360fd6d3.parquet . - mrgsims-ds-6f0c49e0d25f.parquet .    ... . - mrgsims-ds-6f10225ef974.parquet . - mrgsims-ds-6f1094b404d.parquet plan(multisession, workers = 5L)  out1 <- mrgsim_ds(mod, data) rename_ds(out1, \"out1\")  out2 <- future_lapply(1:10, \\(x) { mrgsim_ds(mod, data) }, future.seed = TRUE)  out2 <- reduce_ds(out2) rename_ds(out2, \"out2\")  out3 <- mrgsim_ds(mod, data)  rename_ds(out3, \"out3\") list_temp() . 12 files [143 Mb] . - mrgsims-ds-out1-0001.parquet . - mrgsims-ds-out2-0001.parquet .    ... . - mrgsims-ds-out2-0010.parquet . - mrgsims-ds-out3-0001.parquet rm(out2) gc() .            used  (Mb) gc trigger  (Mb) limit (Mb) max used  (Mb) . Ncells  1946964 104.0    3643540 194.6         NA  3271222 174.8 . Vcells 15237389 116.3   29085557 222.0      16384 27013458 206.1  list_temp() . 2 files [23.8 Mb] . - mrgsims-ds-out1-0001.parquet . - mrgsims-ds-out3-0001.parquet"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"ownership","dir":"","previous_headings":"Files on disk are automagically managed","what":"Ownership","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"setup possible one object owns files disk mrgsim.ds tracks . make copy simulation object, old object longer owns files. can always take ownership back.","code":"ownership() . > Objects: 4 | Files: 13 | Size: 23.8 Mb out4 <- copy_ds(out1, own = TRUE)  check_ownership(out1) . [1] FALSE  check_ownership(out4) . [1] TRUE take_ownership(out1)  check_ownership(out1) . [1] TRUE  check_ownership(out4) . [1] FALSE"},{"path":"https://kylebaron.github.io/mrgsim.ds/index.html","id":"if-this-is-so-great-why-not-make-it-the-default-for-mrgsolve","dir":"","previous_headings":"","what":"If this is so great, why not make it the default for mrgsolve?","title":"Apache Arrow Dataset-Backed Simulation Outputs for mrgsolve","text":"cost . small mid-size simulations, might see small slowdown mrgsim_ds(); definitely won’t faster mrgsim() … even super-quick arrow ecosystem. workflow really large simulation volumes happy pay cost writing outputs file streaming back summarize.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"Coerce mrgsimsds object arrow data set","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"","code":"as_arrow_ds(x, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"x mrgsimsds object list mrgsimsds objects. ... used.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"'Apache' 'Arrow' arrow::Dataset object.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"method list retain list positions containing mrgsimsds object. single data set object returned.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce an mrgsimsds object to an arrow data set — as_arrow_ds","text":"","code":"mod <- house_ds(end = 5)  out <- mrgsim_ds(mod, events = ev(amt = 100))  as_arrow_ds(out) #> FileSystemDataset with 1 Parquet file #> 7 columns #> ID: double #> time: double #> GUT: double #> CENT: double #> RESP: double #> DV: double #> CP: double #>  #> See $metadata for additional Schema metadata"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_table.mrgsimsds.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","title":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","text":"Coerce mrgsimsds object arrow table","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_table.mrgsimsds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","text":"","code":"# S3 method for class 'mrgsimsds' as_arrow_table(x, ..., schema = NULL)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_table.mrgsimsds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","text":"x mrgsimsds object. ... passed arrow::as_arrow_table(). schema passed arrow::as_arrow_table().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_table.mrgsimsds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","text":"'Apache' 'Arrow' arrow::Table simulated data.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_arrow_table.mrgsimsds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce an mrgsimsds object to an arrow table — as_arrow_table.mrgsimsds","text":"","code":"mod <- house_ds(end = 5)  out <- mrgsim_ds(mod, events = ev(amt = 100))  arrow::as_arrow_table(out) #> Table #> 22 rows x 7 columns #> $ID <double> #> $time <double> #> $GUT <double> #> $CENT <double> #> $RESP <double> #> $DV <double> #> $CP <double> #>  #> See $metadata for additional Schema metadata"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"Coerce mrgsimsds object DuckDB table","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"","code":"as_duckdb_ds(x, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"x mrgsimsds object list mrgsimsds objects. ... passed as_arrow_ds().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"tbl simulated data DuckDB; see arrow::to_duckdb().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"conversion handled as_arrow_ds().","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_duckdb_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce an mrgsimsds object to a DuckDB table — as_duckdb_ds","text":"","code":"mod <- house_ds(end = 5)  out <- mrgsim_ds(mod, events = ev(amt = 100))  if(requireNamespace(\"duckdb\")) {   as_duckdb_ds(out) } #> Loading required namespace: duckdb #> # Source:   table<arrow_001> [?? x 7] #> # Database: DuckDB 1.4.4 [unknown@Linux 6.14.0-1017-azure:R 4.5.2/:memory:] #>       ID  time    GUT  CENT  RESP    DV    CP #>    <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> #>  1     1  0      0      0    50    0     0    #>  2     1  0    100      0    50    0     0    #>  3     1  0.25  74.1   25.7  48.7  1.29  1.29 #>  4     1  0.5   54.9   44.5  46.2  2.23  2.23 #>  5     1  0.75  40.7   58.1  43.6  2.90  2.90 #>  6     1  1     30.1   67.8  41.4  3.39  3.39 #>  7     1  1.25  22.3   74.7  39.6  3.74  3.74 #>  8     1  1.5   16.5   79.6  38.2  3.98  3.98 #>  9     1  1.75  12.2   82.8  37.1  4.14  4.14 #> 10     1  2      9.07  85.0  36.4  4.25  4.25 #> # ℹ more rows"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"simulation data saved tempdir() according parent head node computation run . See move_ds() write_ds() change location files, protecting garbage collector.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"","code":"as_mrgsim_ds(x, id = NULL, verbose = FALSE, gc = TRUE)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"x mrgsims object. id used generate output file name. verbose TRUE, print progress information console. gc TRUE, finalizer function attempt remove files object scope; set FALSE protect automatic cleanup. Otherwise, move files tempdir()","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"object class mrgsimsds.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"function take output mrgsolve::mrgsim().","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_mrgsim_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce an mrgsims object to 'Arrow'-backed mrgsimsds object — as_mrgsim_ds","text":"","code":"mod <- house_ds()  data <- ev_expand(amt = 100, ID = 1:10)  out <- mrgsolve::mrgsim(mod, data)  obj <- as_mrgsim_ds(out)  obj #> Model: housemodel #> Dim  : 4,820 x 7 #> Files: 1 [55.4 Kb] #> Owner: yes #>     ID time       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_tibble.mrgsimsds.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","title":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","text":"Coerce mrgsimsds object tbl","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_tibble.mrgsimsds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","text":"","code":"# S3 method for class 'mrgsimsds' as_tibble(x, ...)  # S3 method for class 'mrgsimsds' collect(x, ...)  # S3 method for class 'mrgsimsds' as.data.frame(x, row.names = NULL, optional = FALSE, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_tibble.mrgsimsds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","text":"x mrgsimsds object. ... passed dplyr::as_tibble() dplyr::collect(). row.names passed base::.data.frame(). optional passed base::.data.frame().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_tibble.mrgsimsds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","text":"tbl containing simulated data.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/as_tibble.mrgsimsds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce an mrgsimsds object to a tbl — as_tibble.mrgsimsds","text":"","code":"mod <- house_ds(end = 5)  out <- mrgsim_ds(mod, events = ev(amt = 100))  as.data.frame(out) #>    ID time         GUT     CENT     RESP       DV       CP #> 1   1 0.00   0.0000000  0.00000 50.00000 0.000000 0.000000 #> 2   1 0.00 100.0000000  0.00000 50.00000 0.000000 0.000000 #> 3   1 0.25  74.0818221 25.74883 48.68223 1.287441 1.287441 #> 4   1 0.50  54.8811636 44.50417 46.18005 2.225208 2.225208 #> 5   1 0.75  40.6569660 58.08258 43.61333 2.904129 2.904129 #> 6   1 1.00  30.1194212 67.82976 41.37943 3.391488 3.391488 #> 7   1 1.25  22.3130160 74.74256 39.57649 3.737128 3.737128 #> 8   1 1.50  16.5298888 79.55944 38.18381 3.977972 3.977972 #> 9   1 1.75  12.2456428 82.82739 37.14045 4.141369 4.141369 #> 10  1 2.00   9.0717953 84.95160 36.37858 4.247580 4.247580 #> 11  1 2.25   6.7205513 86.23219 35.83664 4.311610 4.311610 #> 12  1 2.50   4.9787069 86.89146 35.46331 4.344573 4.344573 #> 13  1 2.75   3.6883168 87.09404 35.21773 4.354702 4.354702 #> 14  1 3.00   2.7323723 86.96184 35.06817 4.348092 4.348092 #> 15  1 3.25   2.0241912 86.58513 34.99041 4.329257 4.329257 #> 16  1 3.50   1.4995577 86.03076 34.96614 4.301538 4.301538 #> 17  1 3.75   1.1108997 85.34819 34.98160 4.267409 4.267409 #> 18  1 4.00   0.8229747 84.57402 35.02650 4.228701 4.228701 #> 19  1 4.25   0.6096747 83.73533 35.09315 4.186766 4.186766 #> 20  1 4.50   0.4516581 82.85214 35.17583 4.142607 4.142607 #> 21  1 4.75   0.3345965 81.93923 35.27026 4.096961 4.096961 #> 22  1 5.00   0.2478752 81.00752 35.37329 4.050376 4.050376  tibble::as_tibble(out) #> # A tibble: 22 × 7 #>       ID  time    GUT  CENT  RESP    DV    CP #>    <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> #>  1     1  0      0      0    50    0     0    #>  2     1  0    100      0    50    0     0    #>  3     1  0.25  74.1   25.7  48.7  1.29  1.29 #>  4     1  0.5   54.9   44.5  46.2  2.23  2.23 #>  5     1  0.75  40.7   58.1  43.6  2.90  2.90 #>  6     1  1     30.1   67.8  41.4  3.39  3.39 #>  7     1  1.25  22.3   74.7  39.6  3.74  3.74 #>  8     1  1.5   16.5   79.6  38.2  3.98  3.98 #>  9     1  1.75  12.2   82.8  37.1  4.14  4.14 #> 10     1  2      9.07  85.0  36.4  4.25  4.25 #> # ℹ 12 more rows  dplyr::collect(out) #> # A tibble: 22 × 7 #>       ID  time    GUT  CENT  RESP    DV    CP #>    <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> #>  1     1  0      0      0    50    0     0    #>  2     1  0    100      0    50    0     0    #>  3     1  0.25  74.1   25.7  48.7  1.29  1.29 #>  4     1  0.5   54.9   44.5  46.2  2.23  2.23 #>  5     1  0.75  40.7   58.1  43.6  2.90  2.90 #>  6     1  1     30.1   67.8  41.4  3.39  3.39 #>  7     1  1.25  22.3   74.7  39.6  3.74  3.74 #>  8     1  1.5   16.5   79.6  38.2  3.98  3.98 #>  9     1  1.75  12.2   82.8  37.1  4.14  4.14 #> 10     1  2      9.07  85.0  36.4  4.25  4.25 #> # ℹ 12 more rows"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/copy_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Copy an mrgsimsds object — copy_ds","title":"Copy an mrgsimsds object — copy_ds","text":"default, new object data files.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/copy_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copy an mrgsimsds object — copy_ds","text":"","code":"copy_ds(x, own = TRUE)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/copy_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copy an mrgsimsds object — copy_ds","text":"x mrgsimsds object copy. logical; TRUE new object files; otherwise change ownership.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/copy_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copy an mrgsimsds object — copy_ds","text":"mrgsimsds object identical fields, updated pid.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/copy_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Copy an mrgsimsds object — copy_ds","text":"","code":"mod <- house_ds()  out <- mrgsim_ds(mod)  out2 <- copy_ds(out)  check_ownership(out) #> [1] FALSE  check_ownership(out2) #> [1] TRUE"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/file_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an output file name — file_ds","title":"Create an output file name — file_ds","text":"Create output file name","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/file_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an output file name — file_ds","text":"","code":"file_ds(id = NULL)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/file_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an output file name — file_ds","text":"id tag used form file name; provided, random name generated.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/file_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an output file name — file_ds","text":"character file name.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/file_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an output file name — file_ds","text":"","code":"file_ds() #> [1] \"mrgsims-ds-1a1e4b997b73.parquet\" file_ds(\"example\") #> [1] \"mrgsims-ds-example.parquet\""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/is_mrgsimsds.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if object inherits mrgsimsds — is_mrgsimsds","title":"Check if object inherits mrgsimsds — is_mrgsimsds","text":"Check object inherits mrgsimsds","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/is_mrgsimsds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if object inherits mrgsimsds — is_mrgsimsds","text":"","code":"is_mrgsimsds(x)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/is_mrgsimsds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if object inherits mrgsimsds — is_mrgsimsds","text":"x object check.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/list_temp.html","id":null,"dir":"Reference","previous_headings":"","what":"Manage simulated outputs in tempdir() — list_temp","title":"Manage simulated outputs in tempdir() — list_temp","text":"Manage simulated outputs tempdir()","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/list_temp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Manage simulated outputs in tempdir() — list_temp","text":"","code":"list_temp()  retain_temp(...)  purge_temp()"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/list_temp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Manage simulated outputs in tempdir() — list_temp","text":"... objects whose files purged.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/list_temp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Manage simulated outputs in tempdir() — list_temp","text":"","code":"mod <- house_ds()  out <- lapply(1:10, \\(x) mrgsim_ds(mod))  list_temp() #> 13 files [63.8 Kb] #> - mrgsims-ds-1a1e12601d4e.parquet #> - mrgsims-ds-1a1e13d363b9.parquet #>    ... #> - mrgsims-ds-1a1e77dc4517.parquet #> - mrgsims-ds-1a1e7fa59d41.parquet  sims <- reduce_ds(out)  list_temp() #> 13 files [63.8 Kb] #> - mrgsims-ds-1a1e12601d4e.parquet #> - mrgsims-ds-1a1e13d363b9.parquet #>    ... #> - mrgsims-ds-1a1e77dc4517.parquet #> - mrgsims-ds-1a1e7fa59d41.parquet  retain_temp(sims) #> Discarding 3 files.  list_temp()  #> 10 files [51.3 Kb] #> - mrgsims-ds-1a1e12601d4e.parquet #> - mrgsims-ds-1a1e13d363b9.parquet #>    ... #> - mrgsims-ds-1a1e769062d8.parquet #> - mrgsims-ds-1a1e77dc4517.parquet  purge_temp()  #> Discarding 10 files.  list_temp() #> No files in tempdir."},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Move, rename, or write out data set files — move_ds","title":"Move, rename, or write out data set files — move_ds","text":"Use move_ds() change enclosing directory. write_ds() can also move files, also condenses simulation output single parquet file multiple files backing mrgsimsds object. operations made object place; see Details.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Move, rename, or write out data set files — move_ds","text":"","code":"move_ds(x, path)  rename_ds(x, id)  write_ds(x, sink, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Move, rename, or write out data set files — move_ds","text":"x mrgsimsds object. path new directory location backing files. id short name used create data set files simulated output. sink complete path (including file name) single parquet file containing simulated data; passed arrow::write_parquet(). ... passed arrow::write_parquet(); files always written parquet format.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Move, rename, or write out data set files — move_ds","text":"three functions return new file list, invisibly.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Move, rename, or write out data set files — move_ds","text":"important distinction write_ds() move_ds() rename_ds() multi-file objects. backing files can moved written easily, without much computational burden. multi-file simulation outputs, write_ds() need read file write data single file. Apache Arrow can efficiently, still additional, potentially noticeable computational burden. dataset files rewritten single file write_ds(), files longer cleaned containing R object finalized upon garbage collection. dataset files moved outside tempdir(), files, , longer cleaned garbage collection; file cleanup continue occur long files remain tempdir(). change finalization behavior due garbage collection containing object happen files renamed. three functions modify x place file ownership stays x.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/move_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Move, rename, or write out data set files — move_ds","text":"","code":"mod <- house_ds()  out <- lapply(1:3, \\(x) { mrgsim_ds(mod, events = ev(amt = 100)) })  out <- reduce_ds(out)  rename_ds(out, id = \"example-sims\")  basename(out$files) #> [1] \"mrgsims-ds-example-sims-0001.parquet\" #> [2] \"mrgsims-ds-example-sims-0002.parquet\" #> [3] \"mrgsims-ds-example-sims-0003.parquet\"  write_ds(out, sink = file.path(tempdir(), \"example.parquet\"))  basename(out$files) #> [1] \"example.parquet\"  if (FALSE) { # \\dontrun{   move_ds(out, path = \"data/simulated\")  } # }"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mread_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a model specification file for 'Apache' 'Arrow'-backed simulation outputs — mread_ds","title":"Read a model specification file for 'Apache' 'Arrow'-backed simulation outputs — mread_ds","text":"-light wrappers around mrgsolve functions used load models simulation.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mread_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a model specification file for 'Apache' 'Arrow'-backed simulation outputs — mread_ds","text":"","code":"mread_ds(...)  mcode_ds(...)  modlib_ds(...)  house_ds(...)  mread_cache_ds(...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mread_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a model specification file for 'Apache' 'Arrow'-backed simulation outputs — mread_ds","text":"... passed corresponding mrgsolve function.","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mread_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read a model specification file for 'Apache' 'Arrow'-backed simulation outputs — mread_ds","text":"","code":"mod <- house_ds()  mod #>  #>  #> --------------  source: housemodel.cpp  -------------- #>  #>   project: /home/runner/wor...solve/project #>   shared object: mrgsolve  #>  #>   time:          start: 0 end: 120 delta: 0.25 #>                  add: <none> #>   compartments:  GUT CENT RESP [3] #>   parameters:    CL VC KA F1 D1 WTCL WTVC SEXCL SEXVC #>                  KIN KOUT IC50 WT SEX [14] #>   captures:      DV CP [2] #>   omega:         4x4  #>   sigma:         1x1  #>  #>   solver:        rtol: 1e-08 atol: 1e-08 itol: 1 (scalar) #> ------------------------------------------------------"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds-package.html","id":null,"dir":"Reference","previous_headings":"","what":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds-package","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds-package","text":"Provides tools creating managing file streams support large simulation outputs.","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds-package","text":"Maintainer: Kyle T Baron kylebtwin@imap.cc (ORCID) [copyright holder]","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds.html","id":null,"dir":"Reference","previous_headings":"","what":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","text":"mrgsim.ds provides Apache Arrow-backed simulation output object mrgsolve, greatly reducing memory footprint large simulations providing high-performance pipeline summarizing huge simulation outputs. arrow-based simulation output objects R claim ownership files disk. files automatically removed owning object goes scope becomes subject R garbage collector. \"anonymous\", parquet-formatted files hold data tempdir() working R, functions provided move data permanent locations later use.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds.html","id":"package-wide-options","dir":"Reference","previous_headings":"","what":"Package-wide options","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","text":"mrgsim.ds.show.gc: print messages console object files removed prior object cleanup.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds.html","id":"function-listing","dir":"Reference","previous_headings":"","what":"Function listing","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","text":"Load models mread_ds() mcode_ds() mread_cache_ds() modlib_ds() house_ds() Generate Apache Arrow dataset-backed outputs mrgsim_ds() as_mrgsim_ds() S3 Methods head.mrgsimsds() tail.mrgsimsds() dim.mrgsimsds() names.mrgsimsds() Move rename files rename_ds() move_ds() write_ds() Ownership ownership() check_ownership() list_ownership() take_ownership() disown() copy_ds() Work lists outputs reduce_ds() refresh_ds() prune_ds() Manage tempdir list_temp() retain_temp() purge_temp() Enter dplyr / arrow pipelines dplyr::mutate() dplyr::select() dplyr::filter() dplyr::summarise() dplyr::summarize() dplyr::rename() dplyr::arrange() dplyr::group_by() Coerce R objects .data.frame() dplyr::as_tibble() dplyr::collect() as_arrow_ds() arrow::as_arrow_table() as_duckdb_ds()","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","text":"Maintainer: Kyle T Baron kylebtwin@imap.cc (ORCID) [copyright holder]","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim.ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"mrgsim.ds: 'Apache' 'Arrow' Dataset-Backed Simulation Outputs for 'mrgsolve' — mrgsim.ds","text":"","code":"mod <- house_ds(end = 32)  data <- evd_expand(amt = seq(100, 300, 10))  out <- mrgsim_ds(mod, data)   out #> Model: housemodel #> Dim  : 2,730 x 7 #> Files: 1 [129 Kb] #> Owner: yes #>     ID TIME       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972  head(out) #> # A tibble: 6 × 7 #>      ID  TIME   GUT  CENT  RESP    DV    CP #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1     1  0      0     0    50    0     0    #> 2     1  0    100     0    50    0     0    #> 3     1  0.25  74.1  25.7  48.7  1.29  1.29 #> 4     1  0.5   54.9  44.5  46.2  2.23  2.23 #> 5     1  0.75  40.7  58.1  43.6  2.90  2.90 #> 6     1  1     30.1  67.8  41.4  3.39  3.39  tail(out) #> # A tibble: 6 × 7 #>      ID  TIME      GUT  CENT  RESP    DV    CP #>   <dbl> <dbl>    <dbl> <dbl> <dbl> <dbl> <dbl> #> 1    21  30.8 4.71e-14  67.3  37.2  3.36  3.36 #> 2    21  31   3.49e-14  66.4  37.3  3.32  3.32 #> 3    21  31.2 2.58e-14  65.6  37.4  3.28  3.28 #> 4    21  31.5 1.91e-14  64.8  37.5  3.24  3.24 #> 5    21  31.8 1.42e-14  64.0  37.6  3.20  3.20 #> 6    21  32   1.05e-14  63.2  37.8  3.16  3.16  plot(out, nid = 10)   list_temp() #> 1 files [129 Kb] #> - mrgsims-ds-1a1e74b48dc0.parquet  ownership() #> > Objects: 5 | Files: 5 | Size: 162 Kb  if (FALSE) { # \\dontrun{  rename_ds(out, \"reg-100-300\")  list_temp()  move_ds(out, \"data/sim/regimens\") } # }"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","title":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","text":"simulation data saved tempdir() according parent head node computation run . See move_ds() write_ds() change location files, protecting garbage collector. Note full names must used arguments.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","text":"","code":"mrgsim_ds(x, ..., id = NULL, tags = list(), verbose = FALSE, gc = TRUE)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","text":"x model object loaded mread_ds(), mcode_ds(), modlib_ds(), mread_cache_ds(), house_ds(). ... passed mrgsolve::mrgsim(). id used generate output file name. tags named list atomic data tag (mutate) simulated output. verbose TRUE, print progress information console. gc TRUE, finalizer function attempt remove files object scope; set FALSE protect automatic cleanup. Otherwise, move files tempdir()","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","text":"object class mrgsimsds.","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsim_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate from a model object, returning an arrow-backed output object — mrgsim_ds","text":"","code":"mod <- house_ds()  data <- ev_expand(amt = 100, ID = 1:10)  out <- mrgsim_ds(mod, data, end = 72, delta = 0.1)  out <- mrgsim_ds(mod, data, tags = list(rep = 1))  head(out) #> # A tibble: 6 × 8 #>      ID  time   GUT  CENT  RESP    DV    CP   rep #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1     1  0      0     0    50    0     0        1 #> 2     1  0    100     0    50    0     0        1 #> 3     1  0.25  74.1  25.7  48.7  1.29  1.29     1 #> 4     1  0.5   54.9  44.5  46.2  2.23  2.23     1 #> 5     1  0.75  40.7  58.1  43.6  2.90  2.90     1 #> 6     1  1     30.1  67.8  41.4  3.39  3.39     1"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsimsds-methods.html","id":null,"dir":"Reference","previous_headings":"","what":"Interact with mrgsimsds objects — mrgsimsds-methods","title":"Interact with mrgsimsds objects — mrgsimsds-methods","text":"Interact mrgsimsds objects","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsimsds-methods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interact with mrgsimsds objects — mrgsimsds-methods","text":"","code":"# S3 method for class 'mrgsimsds' dim(x)  # S3 method for class 'mrgsimsds' head(x, n = 6L, ...)  # S3 method for class 'mrgsimsds' tail(x, n = 6L, ...)  # S3 method for class 'mrgsimsds' names(x)  # S3 method for class 'mrgsimsds' plot(   x,   y = NULL,   ...,   nid = 16,   batch_size = 20000,   logy = FALSE,   .dots = list() )"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsimsds-methods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interact with mrgsimsds objects — mrgsimsds-methods","text":"x mrgsimsds object, output mrgsim_ds() as_mrgsim_ds(). n number rows return. ... arguments passed methods. y formula plotting simulated data; provided, columns plotted. nid number subjects plot. batch_size size batch reading data plot method. logy TRUE, plot data log y-axis. .dots list items pass mrgsolve::plot_sims().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsimsds-methods.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Interact with mrgsimsds objects — mrgsimsds-methods","text":"head() tail() look first last file data set, respectively, simulations stored across multiple files. possible correspond first last chunks rows data see collecting data via dplyr::collect().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/mrgsimsds-methods.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Interact with mrgsimsds objects — mrgsimsds-methods","text":"","code":"mod <- house_ds(end = 24)  mod <- omat(mod, diag(0.04, 4))  data <- ev_expand(amt = c(100, 300), ID = 1:20)  set.seed(10203)  out <- mrgsim_ds(mod, data = data)  dim(out) #> [1] 3920    7 head(out) #> # A tibble: 6 × 7 #>      ID  time   GUT  CENT  RESP    DV    CP #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1     1  0      0     0    70.9  0     0    #> 2     1  0    100     0    70.9  0     0    #> 3     1  0.25  68.8  30.9  68.9  1.94  1.94 #> 4     1  0.5   47.3  51.7  65.1  3.24  3.24 #> 5     1  0.75  32.6  65.5  61.1  4.10  4.10 #> 6     1  1     22.4  74.5  57.6  4.66  4.66 tail(out) #> # A tibble: 6 × 7 #>      ID  time      GUT  CENT  RESP    DV    CP #>   <dbl> <dbl>    <dbl> <dbl> <dbl> <dbl> <dbl> #> 1    40  22.8 1.81e-11  124.  39.1  5.57  5.57 #> 2    40  23   1.28e-11  123.  39.2  5.52  5.52 #> 3    40  23.2 9.11e-12  122.  39.4  5.46  5.46 #> 4    40  23.5 6.44e-12  121.  39.5  5.41  5.41 #> 5    40  23.8 4.56e-12  119.  39.7  5.36  5.36 #> 6    40  24   3.23e-12  118.  39.8  5.30  5.30 nrow(out) #> [1] 3920 ncol(out) #> [1] 7 plot(out, ~ CP + RESP, nid = 10)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":null,"dir":"Reference","previous_headings":"","what":"Ownership of simulation files — ownership","title":"Ownership of simulation files — ownership","text":"Functions check ownership disown simulation output files disk.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ownership of simulation files — ownership","text":"","code":"ownership()  list_ownership(full.names = FALSE)  check_ownership(x)  disown(x)  take_ownership(x)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ownership of simulation files — ownership","text":"full.names TRUE, include directory path listing file ownership. x mrgsimsds object.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ownership of simulation files — ownership","text":"check_ownership: TRUE x owns underlying files; FALSE otherwise. list_ownership: data.frame ownership information. ownership: nothing; used side effects. disown: x returned invisibly; modified. take_ownership: x returned invisibly getting modified place.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ownership of simulation files — ownership","text":"One situation need take ownership simulating parallel, simulation happens another R process. mrgsim.ds ownership established simulation returns mrgsimsds object created. happens another R process (e.g., worker node, way transfer information back parent process. case, call take_ownership() results returned parent process appropriate. Typically, results returned list call reduce_ds() create single object pointing owning multiple files. Therefore, rare call take_ownership() directly; , please make sure understand going .","code":""},{"path":[]},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/ownership.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ownership of simulation files — ownership","text":"","code":"mod <- house_ds()  out <- mrgsim_ds(mod, id = 1)  check_ownership(out) #> [1] TRUE  ownership() #> > Objects: 7 | Files: 7 | Size: 350.3 Kb  list_ownership() #>                              file        address #> 1 mrgsims-ds-1a1e7fa59d41.parquet 0x55bf00b8c140 #> 2                 example.parquet 0x55bf089a1748 #> 3 mrgsims-ds-1a1e32eb2210.parquet 0x55bef9a4b738 #> 4            mrgsims-ds-1.parquet 0x55bf0ad092b0 #> 5 mrgsims-ds-1a1e74b48dc0.parquet 0x55befefb1990 #> 6 mrgsims-ds-1a1e4d946557.parquet 0x55bf0a8136e0 #> 7 mrgsims-ds-1a1e5c8841ed.parquet 0x55bf065069c8  e1 <- ev(amt = 100) e2 <- ev(amt = 200)  out <- list(mrgsim_ds(mod, e1), mrgsim_ds(mod, e2))  sims <- reduce_ds(out)  ownership() #> > Objects: 8 | Files: 9 | Size: 403.5 Kb  check_ownership(sims) #> [1] TRUE  check_ownership(out[[1]]) #> [1] FALSE  check_ownership(out[[2]]) #> [1] FALSE"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/prune_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Prune a list of mrgsimsds objects — prune_ds","title":"Prune a list of mrgsimsds objects — prune_ds","text":"Prune list mrgsimsds objects","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/prune_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prune a list of mrgsimsds objects — prune_ds","text":"","code":"prune_ds(x, ...)  # S3 method for class 'mrgsimsds' prune_ds(x, ...)  # S3 method for class 'list' prune_ds(x, ..., inform = TRUE)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/prune_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prune a list of mrgsimsds objects — prune_ds","text":"x list R objects single mrgsimsds object. ... used. inform issue message objects list slots dropped.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/prune_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prune a list of mrgsimsds objects — prune_ds","text":"x list, returned mrgsimsds objects retained. x mrgsimsds object, invisibly returned.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/prune_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prune a list of mrgsimsds objects — prune_ds","text":"","code":"mod <- house_ds(end = 24)  out <- mrgsim_ds(mod, events = ev(amt = 100))  sims <- list(out, letters)  prune_ds(sims) #> dropping 1 objects that are not mrgsimsds. #> [[1]] #> Model: housemodel #> Dim  : 98 x 7 #> Files: 1 [7.4 Kb] #> Owner: yes #>     ID time       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972 #>"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/reduce_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","title":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","text":"Reduce list mrgsimsds objects single object","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/reduce_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","text":"","code":"reduce_ds(x, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/reduce_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","text":"x list mrgsimsds objects single mrgsimsds object. ... used.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/reduce_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","text":"x list, new object created returned. new object take ownership files objects list. x mrgsimsds object, returned invisibly modification.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/reduce_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reduce a list of mrgsimsds objects into a single object — reduce_ds","text":"","code":"mod <- modlib_ds(\"popex\", outvars = \"IPRED\") #> Building popex ...  #> done.  data <- ev_expand(amt = 100, ID = 1:100)  out <- lapply(1:3, function(rep) {   out <- mrgsim_ds(mod, data)    out })  length(out) #> [1] 3  sims <- reduce_ds(out)  sims #> Model: popex #> Dim  : 144.6K x 3 #> Files: 3 [1.5 Mb] #> Owner: yes #>     ID time     IPRED #> 1:   1  0.0 0.0000000 #> 2:   1  0.0 0.0000000 #> 3:   1  0.5 0.4872955 #> 4:   1  1.0 0.9218375 #> 5:   1  1.5 1.3084607 #> 6:   1  2.0 1.6515715 #> 7:   1  2.5 1.9551852 #> 8:   1  3.0 2.2229609  check_ownership(sims) #> [1] TRUE  lapply(out, check_ownership) #> [[1]] #> [1] FALSE #>  #> [[2]] #> [1] FALSE #>  #> [[3]] #> [1] FALSE #>"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":null,"dir":"Reference","previous_headings":"","what":"Refresh 'Arrow' dataset pointers. — refresh_ds","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"Pointers arrow data sets invalid simulation run different process, example simulating parallel. pointers refreshed head node simulation finished.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"","code":"refresh_ds(x, ...)  # S3 method for class 'mrgsimsds' refresh_ds(x, ...)  # S3 method for class 'list' refresh_ds(x, ...)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"x mrgsimsds object. ... future use.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"mrgsimsds object returned invisibly pointers refreshed; modification made place.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"refresh pointers, refresh_ds() checks files still exist passes file list arrow::open_dataset(). object pid dim attributes also refreshed, re-opening data set.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/refresh_ds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Refresh 'Arrow' dataset pointers. — refresh_ds","text":"","code":"mod <- house_ds()  data <- ev_expand(amt = 100, ID = 1:100)  out <- lapply(1:3, function(rep) {   mrgsim_ds(mod, data)  })  refresh_ds(out) #> [[1]] #> Model: housemodel #> Dim  : 48,200 x 7 #> Files: 1 [343.5 Kb] #> Owner: yes #>     ID time       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972 #>  #> [[2]] #> Model: housemodel #> Dim  : 48,200 x 7 #> Files: 1 [343.5 Kb] #> Owner: yes #>     ID time       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972 #>  #> [[3]] #> Model: housemodel #> Dim  : 48,200 x 7 #> Files: 1 [343.5 Kb] #> Owner: yes #>     ID time       GUT     CENT     RESP       DV       CP #> 1:   1 0.00   0.00000  0.00000 50.00000 0.000000 0.000000 #> 2:   1 0.00 100.00000  0.00000 50.00000 0.000000 0.000000 #> 3:   1 0.25  74.08182 25.74883 48.68223 1.287441 1.287441 #> 4:   1 0.50  54.88116 44.50417 46.18005 2.225208 2.225208 #> 5:   1 0.75  40.65697 58.08258 43.61333 2.904129 2.904129 #> 6:   1 1.00  30.11942 67.82976 41.37943 3.391488 3.391488 #> 7:   1 1.25  22.31302 74.74256 39.57649 3.737128 3.737128 #> 8:   1 1.50  16.52989 79.55944 38.18381 3.977972 3.977972 #>"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/save_process_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Save information about the R process that loaded a model — save_process_info","title":"Save information about the R process that loaded a model — save_process_info","text":"Save information R process loaded model","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/save_process_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save information about the R process that loaded a model — save_process_info","text":"","code":"save_process_info(x)"},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/save_process_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save information about the R process that loaded a model — save_process_info","text":"x model object.","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/save_process_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save information about the R process that loaded a model — save_process_info","text":"updated model object suitable using mrgsim_ds().","code":""},{"path":"https://kylebaron.github.io/mrgsim.ds/reference/save_process_info.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save information about the R process that loaded a model — save_process_info","text":"","code":"mod <- mrgsolve::house()  mod <- save_process_info(mod)"},{"path":[]}]
